# Spring Data R2DBC

## Tabla de Contenido

- [Introducción a R2DBC y Spring Data R2DBC](#introduccion-r2dbc-spring-data)
  - [El Problema de JDBC en Entornos Reactivos](#problema-jdbc-reactivos)
  - [¿Qué es R2DBC?](#que-es-r2dbc)
    - [Especificación R2DBC](#especificacion-r2dbc)
    - [Controladores (Drivers) R2DBC](#controladores-r2dbc)
    - [Principios Clave (No Bloqueante, Reactivo, Asíncrono)](#principios-clave-r2dbc)
  - [¿Qué es Spring Data R2DBC?](#que-es-spring-data-r2dbc)
    - [Propósito y Arquitectura](#proposito-arquitectura-spring-data-r2dbc)
    - [Ventajas de Usar Spring Data R2DBC](#ventajas-spring-data-r2dbc)
  - [Configuración Inicial del Proyecto](#configuracion-inicial-r2dbc)
    - [Dependencias (Maven/Gradle)](#dependencias-r2dbc)
    - [Configuración de Conexión (`application.properties/yml`)](#configuracion-conexion-r2dbc)
    - [Habilitar Spring Data R2DBC](#habilitar-spring-data-r2dbc)

- [Mapeo de Entidades (Mapping)](#mapeo-entidades-r2dbc-sd)
  - [Entidades y Tablas](#entidades-tablas-r2dbc)
    - [`@Table`](#table-annotation-r2dbc)
    - [`@Id` y Generación de IDs](#id-generacion-ids-r2dbc)
    - [`@Column`](#column-annotation-r2dbc)
    - [`@Transient`](#transient-annotation-r2dbc)
  - [Tipos de Datos Soportados](#tipos-datos-soportados-r2dbc)
  - [Manejo de Enums](#manejo-enums-r2dbc)
  - [Relaciones (Embeddable & Referencias)](#relaciones-r2dbc)
    - [Objetos Embebidos (`@Embedded`)](#objetos-embebidos-r2dbc)
    - [Manejo de Relaciones (Uno a Uno, Uno a Muchos, Muchos a Muchos)](#manejo-relaciones-r2dbc)
      - [Enfoque Reactivo para Relaciones (composición de flujos)](#enfoque-reactivo-relaciones)
  - [Mapeo Personalizado](#mapeo-personalizado-r2dbc)
    - [`R2dbcCustomConversions`](#r2dbccustomconversions)
    - [`MappingR2dbcConverter`](#mappingr2dbccoverter)

- [Repositorios de Spring Data R2DBC](#repositorios-spring-data-r2dbc-sd)
  - [`ReactiveCrudRepository`](#reactivecrudrepository-r2dbc)
    - [Métodos CRUD Reactivos Estándar](#metodos-crud-reactivos-estandar)
    - [Definición de Consultas Derivadas de Métodos (Query Methods)](#consultas-derivadas-metodos-r2dbc)
      - [Convenciones de Nomenclatura](#convenciones-nomenclatura-queries-r2dbc)
      - [Palabras Clave Soportadas](#palabras-clave-soportadas-r2dbc)
  - [`@Query` Anotación](#query-annotation-r2dbc)
    - [Consultas SQL Nativas Directas](#consultas-sql-nativas-r2dbc)
    - [Uso de SpEL (Spring Expression Language)](#spel-query-r2dbc)
    - [Proyección y Ordenación](#proyeccion-ordenacion-query-r2dbc)
  - [Paginación y Ordenación Reactiva](#paginacion-ordenacion-reactiva)
    - [`Pageable` Reactivo](#pageable-reactivo)
    - [`Sort` Reactivo](#sort-reactivo)
  - [Manejo de Errores Reactivos en Repositorios](#manejo-errores-repositorios-r2dbc)

- [R2dbcEntityTemplate](#r2dbcentitytemplate)
  - [¿Cuándo usar `R2dbcEntityTemplate` vs. Repositorios?](#cuando-usar-r2dbcentitytemplate-vs-repositorios)
  - [Operaciones Básicas Reactivas](#operaciones-basicas-r2dbcentitytemplate)
    - [`insert()`, `update()`, `delete()`, `select()`](#metodos-crud-r2dbcentitytemplate)
  - [Consultas Avanzadas con `Query` y `Criteria`](#consultas-avanzadas-r2dbcentitytemplate)
    - [`Query` y `Criteria` Builder](#query-criteria-builder-r2dbcentitytemplate)
    - [Operadores de Consulta](#operadores-consulta-r2dbcentitytemplate)
    - [Combinación de Criterios](#combinacion-criterios-r2dbcentitytemplate)
  - [Proyección, Ordenación, Paginación](#proyeccion-ordenacion-paginacion-r2dbcentitytemplate)
  - [Manejo de Errores en `R2dbcEntityTemplate`](#manejo-errores-r2dbcentitytemplate)

- [Transacciones Reactivas](#transacciones-reactivas-r2dbc)
  - [Concepto de Transacciones Reactivas](#concepto-transacciones-reactivas)
  - [`ReactiveTransactionManager`](#reactivetransactionmanager)
  - [`@Transactional` en Entornos WebFlux](#transactional-webflux-r2dbc)
  - [`TransactionalOperator` (Transacciones Programáticas)](#transactionaloperator-r2dbc)
  - [Consideraciones sobre Aislamiento y Propagación](#aislamiento-propagacion-r2dbc)
  - [Manejo de Errores y Rollbacks en Transacciones Reactivas](#errores-rollbacks-transacciones-r2dbc)

- [Características Avanzadas y Optimizaciones](#caracteristicas-avanzadas-optimizaciones-r2dbc)
  - [Manejo de Índices](#manejo-indices-r2dbc)
    - [Creación de Índices](#creacion-indices-r2dbc)
    - [Consideraciones de Rendimiento](#consideraciones-rendimiento-indices-r2dbc)
  - [Auditoría](#auditoria-r2dbc)
    - [`@EnableR2dbcAuditing`](#enabler2dbcauditing)
    - [`@CreatedDate`, `@LastModifiedDate`, `@CreatedBy`, `@LastModifiedBy`](#auditoria-annotations-r2dbc)
  - [Ciclo de Vida de las Entidades (Callbacks)](#ciclo-vida-entidades-r2dbc)
    - [`@EventListener` con eventos de Spring Data R2DBC](#eventlistener-r2dbc)
    - [`@PrePersist`, `@PostPersist`, etc.](#callbacks-annotations-r2dbc)
  - [Integración con Spring Boot Actuator](#integracion-spring-boot-actuator-r2dbc)
    - [Health Indicators](#health-indicators-r2dbc)
    - [Métricas](#metricas-r2dbc)

- [Testing en Spring Data R2DBC](#testing-spring-data-r2dbc)
  - [Pruebas Unitarias de Repositorios y Servicios](#pruebas-unitarias-r2dbc)
  - [Pruebas de Integración con Bases de Datos en Memoria (ej. H2 R2DBC)](#pruebas-integracion-r2dbc-inmemory)
  - [Testcontainers para Bases de Datos Relacionales](#testcontainers-r2dbc)
  - [Estrategias de Limpieza de Datos](#limpieza-datos-testing-r2dbc)
